<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="fb_pages_meta_tag" inherit_id="website.layout" name="Facebook pages meta property" priority="18">
            <xpath expr="//head//link" position="after">
                <meta property="fb:pages" t-att-content="website.fb_pages_id"/>
                <meta property="fb:app_id" t-att-content="website.fb_app_id"/>
            </xpath>

        </template>

        <template id="fb_pages_post_instant_article" inherit_id="website_blog.blog_post_complete" name="Facebook Instant Article tools">
            <xpath expr="(//div[@class='container blog_publish_btn'])" position="inside">
                <div groups="base.group_website_publisher" class="pull-left css_editable_mode_hidden">
                    <div t-if="not user_id.fb_long_term_token">
                        <form action="https://www.facebook.com/dialog/oauth" method="get">
                            <input type="hidden" name="client_id" t-att-value="website.fb_app_id"/>
                            <input type="hidden" name="redirect_uri" t-att-value="request.httprequest.url_root+'fb_instant_article/login_success'"/>
                            <input type="hidden" name="state" t-att-value="request.csrf_token()"/>
                            <input type="submit" value="Connect Instant Article App" t-attf-class="btn btn-danger"/>
                        </form>
                    </div>
                    <div t-if="user_id.fb_long_term_token">
                        <span class="fa fa-check"> Facebook Instant Article Connected</span>
                        <form action="/fb_instant_article/disconnect" method="get">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <input type="hidden" name="redirect_uri" t-att-value="request.httprequest.url_root+'blog/'+slug(blog_post.blog_id)+'/post/'+slug(blog_post)"/>
                            <input type="submit" value="Disconnect" t-attf-class="btn btn-danger"/>
                        </form>
                    </div>
                </div>
            </xpath>
        </template>

    </data>
</odoo>
